<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sketchee Quick Test</title>
    <!-- P5.js Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
        .container { max-width: 1000px; margin: 0 auto; padding: 20px; background: white; border-radius: 8px; }
        .canvas-container { border: 2px solid #2196F3; padding: 20px; margin: 20px 0; min-height: 400px; }
        button { padding: 10px 20px; margin: 5px; font-size: 16px; background: #2196F3; color: white; border: none; border-radius: 5px; cursor: pointer; }
        button:hover { background: #1976D2; }
        #console { background: #333; color: #0f0; font-family: monospace; padding: 10px; height: 150px; overflow-y: auto; margin: 10px 0; }
        .status { padding: 10px; margin: 10px 0; border-radius: 5px; background: #e3f2fd; border: 1px solid #2196F3; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üöÄ Sketchee Quick Test</h1>
        
        <div class="status">
            <strong>Purpose:</strong> Test if P5.js rendering works properly in the canvas container.
        </div>
        
        <div>
            <button onclick="testBasicCircle()">Test Red Circle</button>
            <button onclick="testBlueSquare()">Test Blue Square</button>
            <button onclick="testSpinning()">Test Spinning Animation</button>
            <button onclick="clearCanvas()">Clear Canvas</button>
            <button onclick="simulateVoiceCommand()">Simulate "draw a red circle"</button>
        </div>
        
        <div class="canvas-container" id="canvas-container">
            <h3>Canvas Output:</h3>
            <div id="p5js-container" style="min-height: 350px; border: 2px dashed #ccc; display: flex; align-items: center; justify-content: center;">
                <div style="color: #999; text-align: center;">
                    <div style="font-size: 3em; margin-bottom: 10px;">üé®</div>
                    Ready to test P5.js rendering
                </div>
            </div>
        </div>
        
        <div>
            <strong>Console Log:</strong>
            <div id="console"></div>
        </div>
    </div>

    <script>
        // Console logging
        const consoleDiv = document.getElementById('console');
        const originalLog = console.log;
        const originalError = console.error;
        
        console.log = function(...args) {
            originalLog.apply(console, args);
            consoleDiv.innerHTML += `<div style="color: #0f0;">[LOG] ${args.join(' ')}</div>`;
            consoleDiv.scrollTop = consoleDiv.scrollHeight;
        };
        
        console.error = function(...args) {
            originalError.apply(console, args);
            consoleDiv.innerHTML += `<div style="color: #f44;">[ERROR] ${args.join(' ')}</div>`;
            consoleDiv.scrollTop = consoleDiv.scrollHeight;
        };
        
        let currentP5Instance = null;
        
        function clearCanvas() {
            if (currentP5Instance) {
                currentP5Instance.remove();
                currentP5Instance = null;
            }
            const container = document.getElementById('p5js-container');
            container.innerHTML = `
                <div style="color: #999; text-align: center;">
                    <div style="font-size: 3em; margin-bottom: 10px;">üé®</div>
                    Ready to test P5.js rendering
                </div>
            `;
            container.classList.remove('has-canvas');
            console.log('Canvas cleared');
        }
        
        function testBasicCircle() {
            console.log('Testing basic red circle...');
            clearCanvas();
            
            const container = document.getElementById('p5js-container');
            container.innerHTML = '<div style="color: #2196F3;">Creating red circle...</div>';
            
            setTimeout(() => {
                try {
                    currentP5Instance = new p5((p) => {
                        p.setup = function() {
                            p.createCanvas(600, 400);
                            console.log('‚úÖ Canvas created: 600x400');
                        };
                        
                        p.draw = function() {
                            p.background(240, 240, 240);
                            p.fill(255, 80, 80);
                            p.stroke(0);
                            p.strokeWeight(2);
                            p.ellipse(300, 200, 150, 150);
                        };
                    }, 'p5js-container');
                    
                    container.classList.add('has-canvas');
                    console.log('‚úÖ Red circle test successful');
                } catch (error) {
                    console.error('‚ùå Red circle test failed:', error);
                    container.innerHTML = `<div style="color: red;">Error: ${error.message}</div>`;
                }
            }, 500);
        }
        
        function testBlueSquare() {
            console.log('Testing blue square...');
            clearCanvas();
            
            const container = document.getElementById('p5js-container');
            container.innerHTML = '<div style="color: #2196F3;">Creating blue square...</div>';
            
            setTimeout(() => {
                try {
                    currentP5Instance = new p5((p) => {
                        p.setup = function() {
                            p.createCanvas(600, 400);
                        };
                        
                        p.draw = function() {
                            p.background(240, 240, 240);
                            p.fill(80, 120, 255);
                            p.stroke(0);
                            p.strokeWeight(2);
                            p.rectMode(p.CENTER);
                            p.rect(300, 200, 120, 120);
                        };
                    }, 'p5js-container');
                    
                    container.classList.add('has-canvas');
                    console.log('‚úÖ Blue square test successful');
                } catch (error) {
                    console.error('‚ùå Blue square test failed:', error);
                }
            }, 500);
        }
        
        function testSpinning() {
            console.log('Testing spinning animation...');
            clearCanvas();
            
            const container = document.getElementById('p5js-container');
            container.innerHTML = '<div style="color: #2196F3;">Creating spinning animation...</div>';
            
            setTimeout(() => {
                try {
                    currentP5Instance = new p5((p) => {
                        p.setup = function() {
                            p.createCanvas(600, 400);
                        };
                        
                        p.draw = function() {
                            p.background(240, 240, 240);
                            
                            p.push();
                            p.translate(300, 200);
                            p.rotate(p.frameCount * 0.05);
                            
                            p.fill(255, 100, 150);
                            p.stroke(0);
                            p.strokeWeight(2);
                            p.rectMode(p.CENTER);
                            p.rect(0, 0, 100, 100);
                            
                            p.pop();
                        };
                    }, 'p5js-container');
                    
                    container.classList.add('has-canvas');
                    console.log('‚úÖ Spinning animation test successful');
                } catch (error) {
                    console.error('‚ùå Spinning animation test failed:', error);
                }
            }, 500);
        }
        
        function simulateVoiceCommand() {
            console.log('üé§ Simulating voice command: "draw a red circle"');
            
            // Simulate the full pipeline
            const command = "draw a red circle";
            console.log('Voice input received:', command);
            console.log('Processing command...');
            
            // Generate mock P5.js code
            const mockCode = `
function setup() {
    createCanvas(600, 400);
}

function draw() {
    background(240, 240, 240);
    fill(255, 80, 80);
    stroke(0);
    strokeWeight(2);
    ellipse(300, 200, 150, 150);
}`;
            
            console.log('Generated P5.js code:', mockCode);
            console.log('Rendering sketch...');
            
            // Clear and render
            clearCanvas();
            const container = document.getElementById('p5js-container');
            container.innerHTML = '<div style="color: #2196F3;">üé§ Processing voice command...</div>';
            
            setTimeout(() => {
                testBasicCircle();
                console.log('üéâ Voice command simulation complete!');
            }, 1000);
        }
        
        // Initialize
        console.log('üöÄ Sketchee Quick Test initialized');
        console.log('P5.js loaded:', typeof p5 !== 'undefined');
        console.log('Click buttons above to test P5.js rendering');
    </script>
</body>
</html>
